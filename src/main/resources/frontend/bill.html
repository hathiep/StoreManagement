<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Quản lý hóa đơn</title>
    <link type="text/css" href="files/css/main.css" rel="stylesheet" />
    <script type="text/javascript" src="files/js/jquery_min.js"></script>
</head>

<body>
<!-- HEADER -->
<div class="header">
    <a href="#" title="Quản lý cửa hàng" style="outline:none;">
        <h1>QUẢN LÝ CỬA HÀNG</h1>
    </a>
    <div class="logout">
        Xin chào <b><div id="user-info"></div></b> | <a href="#" title="Đăng xuất">Đăng xuất</a>
    </div>
    <!-- NAVIGATION BAR -->
    <ul class="navigation">
        <a href="Product.html" title="Quản lý sản phẩm">
            <li>Quản lý sản phẩm</li>
        </a>
        <a href="#" title="Nhập hàng">
            <li>Nhập hàng</li>
        </a>
        <a href="createSupplier.html" title="Thêm nhà cung cấp">
            <li>Thêm nhà cung cấp</li>
        </a>
        <a href="bill.html" title="Quản lý hóa đơn" class="navigation-item-selected">
            <li>Quản lý hóa đơn</li>
        </a>
    </ul>
    <!-- END NAVIGATION BAR -->
</div>
<!-- END HEADER -->

<!-- CONTENT -->
<div class="content">
    <!-- BILL LIST -->
    <div class="danhsach">
        <ul class="danhsach-header">
            <li style="width: 100px;">ID</li>
            <li style="width: 200px;">Ngày</li>
            <li style="width: 150px;">Tổng tiền</li>
        </ul>
        <div class="danhsach-chitiet" id="bill-list">
            <!-- Bill items will be dynamically loaded here -->
        </div>
    </div>
    <!-- END BILL LIST -->
</div>
<!-- END CONTENT -->

<!-- FOOTER -->
<div class="footer">
    <p><b>Web quản lý nhà hàng</b></p>
    <span style="line-height:18px;">
            <b>Người thực hiện:</b><br/>
            GR_20<br/>
        </span>
</div>
<!-- END FOOTER -->

<!-- JavaScript for fetching and displaying bill data -->
<script type="text/javascript">
    // Call function to get bills when the page is loaded
    $(document).ready(function() {
        $.ajax({
            url: "/api/bills",
            type: "GET",
            success: function(response) {
                displayBills(response);
            },
            error: function(xhr, status, error) {
                console.error("Error:", error);
            }
        });
    });

    function displayBills(bills) {
        var billListContainer = $("#bill-list");

        bills.forEach(function(bill) {
            var billItem = $("<ul class='danhsach-item'>").html(`
                    <li style="width:100px;">${bill.id}</li>
                    <li style="width:200px;">${bill.date}</li>
                    <li style="width:150px;">${bill.total}</li>
                `);
            billListContainer.append(billItem);
        });
    }
</script>

<!-- JavaScript for displaying user info -->
<script>
    // Retrieve user data from localStorage
    var userData = JSON.parse(localStorage.getItem('currentUser'));

    // Display user info
    if (userData) {
        $("#user-info").html(`<p>Tên: ${userData.name}</p>`);
    } else {
        $("#user-info").html("<p>Không có thông tin người dùng.</p>");
    }
</script>

</body>

</html>
